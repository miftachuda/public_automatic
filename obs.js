var a0_0x39999e=a0_0x4245;function a0_0x4245(_0x5f861e,_0x185bad){var _0x5c9986=a0_0x5c99();return a0_0x4245=function(_0x424584,_0x254b4d){_0x424584=_0x424584-0xb2;var _0x3a431a=_0x5c9986[_0x424584];return _0x3a431a;},a0_0x4245(_0x5f861e,_0x185bad);}(function(_0x22362b,_0x251f85){var _0x2b3867=a0_0x4245,_0x2a8066=_0x22362b();while(!![]){try{var _0xf52fa1=-parseInt(_0x2b3867(0xfc))/0x1*(-parseInt(_0x2b3867(0x10f))/0x2)+-parseInt(_0x2b3867(0xc1))/0x3*(-parseInt(_0x2b3867(0xd2))/0x4)+parseInt(_0x2b3867(0xf4))/0x5*(parseInt(_0x2b3867(0xf3))/0x6)+-parseInt(_0x2b3867(0xf2))/0x7+parseInt(_0x2b3867(0xde))/0x8*(parseInt(_0x2b3867(0x120))/0x9)+-parseInt(_0x2b3867(0x106))/0xa+parseInt(_0x2b3867(0x109))/0xb;if(_0xf52fa1===_0x251f85)break;else _0x2a8066['push'](_0x2a8066['shift']());}catch(_0x20fe08){_0x2a8066['push'](_0x2a8066['shift']());}}}(a0_0x5c99,0x1d175));const fs=require(a0_0x39999e(0xe2)),lodash=require(a0_0x39999e(0x11c)),moment=require('moment');var axios=require(a0_0x39999e(0x10e)),chalk=require(a0_0x39999e(0xe5)),qs=require('qs');require(a0_0x39999e(0xed));function a0_0x5c99(){var _0x55cf46=['1010','00:00','https://apps.pertamina.com/bocpp-v2.0/api/scheduleHistories?ru=R401&area=LOC-II','keys','idEquipment','parentRecord','green','list','Waktu\x20sync\x20Equipment\x20terakhir\x20:\x20','Pilih\x20jadwal\x20waktu\x20:','skip','concat','resync\x20schedule','then','equipment','forEach','13648KMnent','resync\x20all','024','stringify','get','tosend.json','https://apps.pertamina.com/bocpp-v2.0/api/equipRecords/','pertamina','Uploading\x20Record\x20Data...','Sucessfully\x20Get\x20Schedule\x20History','unit','post','28872SzvdWp','Failed\x20Save\x20Record\x20Data','application/json','Upload\x20canceled','fs/promises','registerPrompt','catch','chalk','delay','Sucessfully\x20Save\x20Schedule','Failed\x20to\x20Login\x20Something\x20Wrong','input','mode','allan.syahputra','yes','colors','muhammad.aulya','number','HH:mm:ss','synctime','1393903IrDWYY','60780CmPVow','55kbhKxF','Schedule\x20not\x20available\x20please\x20choose\x20resync\x20mode','date','Data\x20not\x20available','022','025','Request\x20Schedule\x20History,\x20Please\x20Wait....','Sucessfully\x20Get\x20Last\x20Value','1XKGiwQ','04:00','002','shift','Sucessfully\x20Save\x20Record\x20Data','Sucessfully\x20Save\x20Last\x20Value','timestamp','resync\x20last\x20value','https://apps.pertamina.com/bocpp-v2.0/api/logins?secretKey=ee8fbc9dfa034db4a2419bfb4bfa9562','log','1091970RBvpqJ','filter','scanner','3151280drPsdD','Failed\x20Save\x20Last\x20Value','inquirer-date-prompt','map','lastvalue.json','axios','17414DXtJjg','2-digit','length','red','Pilih\x20waktu\x20syncron\x20:','prompt','Pilih\x20mode\x20data\x20:','writeFile','toString','https://apps.pertamina.com/bocpp-v2.0/api/lastValueRecords?bocpp=boc&ru=R401&area=LOC-II','schedule.json','16:00','reduce','lodash','./schedule.json','Data\x20ready\x20to\x20Send,\x20are\x20you\x20sure\x20to\x20upload\x20:','https://apps.pertamina.com/bocpp-v2.0/api/equipRecord/','18bYKZWy','Bearer\x20','Pertaminaru4','rfid','026','Request\x20Last\x20Value,\x20Please\x20Wait....','Pilih\x20unit\x20:','Pertamina752906752','sync','bold','idParameter','./lastvalue.json','data','short','Running','value','Masukan\x20nama\x20scanner\x20:','Failed\x20to\x20Get\x20Schedule\x20History','token','satrio.sarjono','blue','Last\x20value\x20not\x20available\x20please\x20choose\x20resync\x20mode','format','12wpRJYS'];a0_0x5c99=function(){return _0x55cf46;};return a0_0x5c99();}const inquirer=require('inquirer');inquirer[a0_0x39999e(0xe3)](a0_0x39999e(0xf6),require(a0_0x39999e(0x10b)));var synctime,unit,shift,delay,scanner,mode,lastvalue,schedule,username,password;async function getInput(){var _0x342263=a0_0x39999e;scanner=await inquirer[_0x342263(0x114)]([{'type':_0x342263(0xe9),'name':_0x342263(0x108),'message':_0x342263(0xba),'filter'(_0x5c1b20){return _0x5c1b20;}}])['then'](_0x27f221=>{var _0x2c27c4=_0x342263;return _0x27f221[_0x2c27c4(0x108)];}),unit=await inquirer[_0x342263(0x114)]([{'type':_0x342263(0xc9),'name':_0x342263(0xdc),'message':_0x342263(0x126),'choices':[_0x342263(0xfe),'021',_0x342263(0xf8),'023',_0x342263(0xd4),_0x342263(0xf9),'041'],'filter'(_0x5ac685){return _0x5ac685;}}])[_0x342263(0xcf)](_0x48fbfe=>{var _0x2dae00=_0x342263;return _0x48fbfe[_0x2dae00(0xdc)];}),shift=await inquirer[_0x342263(0x114)]([{'type':_0x342263(0xc9),'name':_0x342263(0xff),'message':_0x342263(0xcb),'choices':[_0x342263(0xc3),_0x342263(0xfd),'08:00','12:00',_0x342263(0x11a),'20:00'],'filter'(_0x17ad52){return _0x17ad52;}}])['then'](_0x3af408=>{var _0x4da048=_0x342263;return _0x3af408[_0x4da048(0xff)];}),synctime=await inquirer[_0x342263(0x114)]([{'type':_0x342263(0xf6),'name':_0x342263(0xf1),'message':_0x342263(0x113),'format':{'month':_0x342263(0xb7),'hour':'2-digit','minute':_0x342263(0x110),'hour12':![]},'transformer':_0x1f705f=>chalk[_0x342263(0xb3)][_0x342263(0x112)](_0x1f705f),'filter'(_0x2496f8){return _0x2496f8;}}])[_0x342263(0xcf)](_0x98e9b2=>{var _0x5a2435=_0x342263;return _0x98e9b2[_0x5a2435(0xf1)];}),delay=await inquirer[_0x342263(0x114)]([{'type':_0x342263(0xef),'name':_0x342263(0xe6),'message':'Waktu\x20delay\x20antar\x20equipment\x20:','filter'(_0x3a022d){return _0x3a022d;}}])['then'](_0x3c8dd4=>{var _0x435fe8=_0x342263;return _0x3c8dd4[_0x435fe8(0xe6)];}),mode=await inquirer[_0x342263(0x114)]([{'type':_0x342263(0xc9),'name':_0x342263(0xea),'message':_0x342263(0x115),'choices':[_0x342263(0xcc),'resync\x20all',_0x342263(0x103),_0x342263(0xce)],'filter'(_0xa5cdda){return _0xa5cdda;}}])[_0x342263(0xcf)](_0x4ab99c=>{var _0x425917=_0x342263;return _0x4ab99c[_0x425917(0xea)];});}async function fire(){var _0x239675=a0_0x39999e;switch(scanner){case _0x239675(0xee):username=scanner,password=_0x239675(0x127);break;case'allan.syahputra':username=scanner,password='Pertaminaru4';break;case _0x239675(0xbd):username=_0x239675(0xeb),password=_0x239675(0x122);break;}var _0x56f004=async function(){var _0x2f6be2=_0x239675,_0x3a8c26=qs[_0x2f6be2(0xd5)]({'username':username,'password':password,'companyCode':_0x2f6be2(0xc2),'domainName':_0x2f6be2(0xd9)}),_0x3f73c0={'method':_0x2f6be2(0xdd),'url':_0x2f6be2(0x104),'headers':{'Content-Type':'application/x-www-form-urlencoded'},'data':_0x3a8c26};return console['log']('Send\x20Login\x20key....'),axios(_0x3f73c0)[_0x2f6be2(0xcf)](function(_0x3f1135){var _0x4a61f3=_0x2f6be2;return console[_0x4a61f3(0x105)]('Sucessfully\x20Login\x20to\x20server'['green']),_0x3f1135[_0x4a61f3(0xb6)][_0x4a61f3(0xbc)];})['catch'](function(_0x58687c){var _0x4c5828=_0x2f6be2;console[_0x4c5828(0x105)](_0x4c5828(0xe8)[_0x4c5828(0x112)]);});},_0x35282b=async function(_0x140697){var _0x29936f=_0x239675,_0x4bc452={'method':_0x29936f(0xd6),'url':_0x29936f(0x118),'headers':{'Authorization':_0x29936f(0x121)+_0x140697}};return console['log'](_0x29936f(0x125)),axios(_0x4bc452)['then'](function(_0x439143){var _0x814707=_0x29936f;return console['log'](_0x814707(0xfb)[_0x814707(0xc8)]),_0x439143[_0x814707(0xb6)];})[_0x29936f(0xe4)](function(_0x496c12){var _0x2a382c=_0x29936f;console[_0x2a382c(0x105)]('Failed\x20to\x20get\x20Last\x20Value\x20Record'[_0x2a382c(0x112)]),runit();});},_0x43c405=async function(_0x2c46ea){var _0xb68a3e=_0x239675,_0x196466={'method':_0xb68a3e(0xd6),'url':_0xb68a3e(0xc4),'headers':{'Authorization':_0xb68a3e(0x121)+_0x2c46ea}};return console[_0xb68a3e(0x105)](_0xb68a3e(0xfa)),axios(_0x196466)[_0xb68a3e(0xcf)](function(_0x3b04f4){var _0x41ed8b=_0xb68a3e;return console['log'](_0x41ed8b(0xdb)[_0x41ed8b(0xc8)]),_0x3b04f4[_0x41ed8b(0xb6)];})[_0xb68a3e(0xe4)](function(_0x451bc0){var _0x5ec2c0=_0xb68a3e;console[_0x5ec2c0(0x105)](_0x5ec2c0(0xbb)[_0x5ec2c0(0x112)]),runit();});};let _0x52218a=!![];const _0x5ab29d=await _0x56f004();function _0x3505bc(_0x5725f2,_0x4f259b){var _0x4aa4f3=_0x239675;try{return _0x52218a=!![],require(_0x5725f2);}catch(_0x86eab3){return console[_0x4aa4f3(0x105)](_0x4f259b),_0x52218a=![],![];}}switch(mode){case'skip':lastvalue=_0x3505bc(_0x239675(0xb5),_0x239675(0xbf)),schedule=_0x3505bc(_0x239675(0x11d),_0x239675(0xf5));break;case _0x239675(0xd3):lastvalue=await _0x35282b(_0x5ab29d),fs[_0x239675(0x116)]('lastvalue.json',JSON[_0x239675(0xd5)](lastvalue))['then'](function(_0x2cdb4f){var _0x389332=_0x239675;console[_0x389332(0x105)](_0x389332(0x101)[_0x389332(0xc8)]);})['catch'](function(_0x21ffb2){var _0x473675=_0x239675;console['log']('Failed\x20Save\x20Last\x20Value'[_0x473675(0x112)]);}),schedule=await _0x43c405(_0x5ab29d),fs['writeFile'](_0x239675(0x119),JSON[_0x239675(0xd5)](schedule))['then'](function(_0x25330b){var _0x13e5ce=_0x239675;console[_0x13e5ce(0x105)](_0x13e5ce(0xe7)[_0x13e5ce(0xc8)]);})['catch'](function(_0x308a74){var _0x47b30=_0x239675;console[_0x47b30(0x105)]('Failed\x20Save\x20Schedule'[_0x47b30(0x112)]);});break;case _0x239675(0x103):lastvalue=await _0x35282b(_0x5ab29d),fs[_0x239675(0x116)](_0x239675(0x10d),JSON[_0x239675(0xd5)](lastvalue))[_0x239675(0xcf)](function(_0x3e4d49){var _0x5de569=_0x239675;console['log'](_0x5de569(0x101)['green']);})['catch'](function(_0x22b0fc){var _0x3c8d01=_0x239675;console[_0x3c8d01(0x105)](_0x3c8d01(0x10a)[_0x3c8d01(0x112)]);}),schedule=_0x3505bc(_0x239675(0x11d),_0x239675(0xf5));break;case _0x239675(0xce):lastvalue=_0x3505bc('./lastvalue.json',_0x239675(0xbf)),schedule=await _0x43c405(_0x5ab29d),fs['writeFile']('schedule.json',JSON['stringify'](schedule))[_0x239675(0xcf)](function(_0x15396a){var _0x4368c5=_0x239675;console['log'](_0x4368c5(0xe7)[_0x4368c5(0xc8)]);})['catch'](function(_0x56ed8f){var _0x5ccda9=_0x239675;console['log']('Failed\x20Save\x20Schedule'[_0x5ccda9(0x112)]);});break;}if(_0x52218a){var _0x40f0e3=lodash(schedule)['filter']({'unit':unit,'shift':shift,'status':_0x239675(0xb8)})[_0x239675(0xb9)](),_0x4bc4b0=schedule['filter'](_0x1dcd24=>{var _0x139500=_0x239675;return _0x1dcd24[_0x139500(0xdc)]==_0x139500(0x124)||_0x1dcd24[_0x139500(0xdc)]==_0x139500(0xd4)&&_0x1dcd24[_0x139500(0xff)]==shift&&_0x1dcd24['status']==_0x139500(0xb8);}),_0x778da3=_0x40f0e3[_0x239675(0x10c)](_0x2f1bf=>{var _0x551349=_0x239675;synctime=moment(synctime);function _0x55f891(_0x11b46e,_0x7f6151){return _0x11b46e+_0x7f6151*0x3e8;}var _0x373ea6=lodash(lastvalue)[_0x551349(0x107)]({'idEquipment':_0x2f1bf[_0x551349(0xc6)]})['value'](),_0x19e9f0=Object[_0x551349(0xc5)](_0x373ea6)[_0x551349(0x11b)](function(_0x492510,_0x17e126){var _0x41a442=_0x551349;return _0x492510[_0x41a442(0xcd)](_0x373ea6[_0x17e126]);},[]),_0x2a2249=_0x55f891(synctime,delay),_0x3e82d0=moment(_0x2a2249)['format']('YYYY-MM-DD\x20HH:mm:ss')[_0x551349(0x117)](),_0x104576=moment(_0x2a2249)[_0x551349(0xc0)](_0x551349(0xf0))[_0x551349(0x117)]();return synctime=_0x2a2249,_0x19e9f0['map'](_0x586b45=>{var _0x185ebf=_0x551349;return{'idScheduleHistory':_0x2f1bf['id'],'parentRecord':_0x2f1bf[_0x185ebf(0xc7)],'value':_0x586b45['value'],'idParameter':_0x586b45[_0x185ebf(0xb4)],'scanWith':_0x185ebf(0x123),'timestamp':_0x3e82d0,'scanBy':scanner,'approved':0x0,'shift':_0x104576,'notesRecord':''};});}),_0x1c4a73=Object[_0x239675(0xc5)](_0x778da3)['reduce'](function(_0xb960d7,_0x12e236){var _0x199ba2=_0x239675;return _0xb960d7[_0x199ba2(0xcd)](_0x778da3[_0x12e236]);},[]);await fs[_0x239675(0x116)](_0x239675(0xd7),JSON[_0x239675(0xd5)](_0x1c4a73))[_0x239675(0xcf)](function(_0x39dc5b){var _0xb9791=_0x239675;console[_0xb9791(0x105)](_0xb9791(0x100)[_0xb9791(0xc8)]);})[_0x239675(0xe4)](function(_0x1e2c08){var _0xefb0f=_0x239675;console[_0xefb0f(0x105)](_0xefb0f(0xdf)[_0xefb0f(0x112)]);});}else _0x1c4a73=null;return[_0x1c4a73,_0x5ab29d,_0x40f0e3];}var link=a0_0x39999e(0xd8),link2=a0_0x39999e(0x11f),syncronize=async function(_0x55d526,_0x3d2430){var _0x36bd6d=a0_0x39999e,_0x4c290f=JSON[_0x36bd6d(0xd5)](_0x55d526),_0x1ea4fc={'method':_0x36bd6d(0xdd),'url':link,'headers':{'Authorization':'Bearer\x20'+_0x3d2430,'Content-Type':_0x36bd6d(0xe0)},'data':_0x4c290f};return console[_0x36bd6d(0x105)](_0x36bd6d(0xda)),axios(_0x1ea4fc)['then'](function(_0x11a038){var _0x126d48=_0x36bd6d;return console[_0x126d48(0x105)](_0x11a038),_0x11a038[_0x126d48(0xb6)];})[_0x36bd6d(0xe4)](function(_0x1b453b){var _0x1505fe=_0x36bd6d;console[_0x1505fe(0x105)](_0x1b453b);});},runit=async function(){var _0x476284=a0_0x39999e;await getInput();var _0x317ea3=await fire();_0x317ea3[0x2]!=null&&_0x317ea3[0x0]!=null?(_0x317ea3[0x2][_0x476284(0xd1)](_0xb6bc67=>{var _0x13d292=_0x476284;console[_0x13d292(0x105)](_0xb6bc67[_0x13d292(0xd0)]);}),console[_0x476284(0x105)](Object[_0x476284(0xc5)](_0x317ea3[0x2])[_0x476284(0x111)]+'\x20Equip\x20Record\x20Ready\x20to\x20send'),console[_0x476284(0x105)]('Jadwal\x20syncron\x20:\x20'+shift[_0x476284(0xbe)]),console[_0x476284(0x105)](_0x476284(0xca)+_0x317ea3[0x0][_0x317ea3[0x0][_0x476284(0x111)]-0x1][_0x476284(0x102)][_0x476284(0xbe)]),sync=await inquirer['prompt']([{'type':_0x476284(0xc9),'name':_0x476284(0xb2),'message':_0x476284(0x11e),'choices':[_0x476284(0xec),'no'],'filter'(_0x314be8){return _0x314be8;}}])[_0x476284(0xcf)](_0x4f41c0=>{var _0x411159=_0x476284;return _0x4f41c0[_0x411159(0xb2)]===_0x411159(0xec)?console[_0x411159(0x105)](syncronize(_0x317ea3[0x0],_0x317ea3[0x1])[_0x411159(0xb6)]):console[_0x411159(0x105)](_0x411159(0xe1)[_0x411159(0x112)]),_0x4f41c0[_0x411159(0xb2)];})):console[_0x476284(0x105)](_0x476284(0xf7)[_0x476284(0x112)]);};runit();