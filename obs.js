var _0x2e2608=_0x3b60;(function(_0x330a6c,_0x124139){var _0xc3f870=_0x3b60,_0x5a25b0=_0x330a6c();while(!![]){try{var _0x2a9603=-parseInt(_0xc3f870(0x164))/0x1+-parseInt(_0xc3f870(0x110))/0x2*(parseInt(_0xc3f870(0x129))/0x3)+parseInt(_0xc3f870(0x12b))/0x4*(parseInt(_0xc3f870(0x131))/0x5)+-parseInt(_0xc3f870(0x135))/0x6+-parseInt(_0xc3f870(0x11c))/0x7+parseInt(_0xc3f870(0x119))/0x8+parseInt(_0xc3f870(0x169))/0x9;if(_0x2a9603===_0x124139)break;else _0x5a25b0['push'](_0x5a25b0['shift']());}catch(_0x342a04){_0x5a25b0['push'](_0x5a25b0['shift']());}}}(_0x1ff9,0x958bb));function _0x3b60(_0x378a57,_0x58238e){var _0x1ff9f5=_0x1ff9();return _0x3b60=function(_0x3b60ad,_0xe078f4){_0x3b60ad=_0x3b60ad-0x105;var _0x1547e1=_0x1ff9f5[_0x3b60ad];return _0x1547e1;},_0x3b60(_0x378a57,_0x58238e);}const fs=require('fs/promises'),lodash=require(_0x2e2608(0x14b)),moment=require('moment');var axios=require(_0x2e2608(0x144)),chalk=require('chalk'),qs=require('qs');require(_0x2e2608(0x13b));const inquirer=require(_0x2e2608(0x120));inquirer[_0x2e2608(0x114)]('date',require(_0x2e2608(0x148)));var synctime,unit,shift,delay,scanner,mode,lastvalue,schedule;function _0x1ff9(){var _0x38b6aa=['1969086hOnXTT','log','sync','Send\x20Login\x20key....','inquirer','Request\x20Last\x20Value,\x20Please\x20Wait....','Failed\x20to\x20Get\x20Schedule\x20History','Request\x20Schedule\x20History,\x20Please\x20Wait....','red','Failed\x20Save\x20Schedule','mode','stringify','\x20Equip\x20Record\x20Ready\x20to\x20send','378204EvpFnY','04:00','78272AVmMbh','shift','skip','forEach','format','026','285usJDxb','unit','keys','delay','3183708uLbksg','002','input','Pilih\x20unit\x20:','green','resync\x20all','colors','08:00','yes','prompt','022','reduce','resync\x20last\x20value','resync\x20schedule','./schedule.json','axios','20:00','HH:mm:ss','./lastvalue.json','inquirer-date-prompt','muhammad.rovalino','Schedule\x20not\x20available\x20please\x20choose\x20resync\x20mode','lodash','concat','synctime','data','Bearer\x20','map','16:00','https://apps.pertamina.com/bocpp-v2.0/api/equipRecords/','idEquipment','list','Pilih\x20mode\x20data\x20:','Pilih\x20jadwal\x20waktu\x20:','value','Failed\x20Save\x20Last\x20Value','status','Last\x20value\x20not\x20available\x20please\x20choose\x20resync\x20mode','token','Failed\x20to\x20Login\x20Something\x20Wrong','Upload\x20canceled','Sucessfully\x20Get\x20Schedule\x20History','then','Uploading\x20Record\x20Data...','Masukan\x20nama\x20scanner\x20:','muhammad.aulya','https://apps.pertamina.com/bocpp-v2.0/api/logins?secretKey=ee8fbc9dfa034db4a2419bfb4bfa9562','550408YCdieT','025','scanner','asyncFunti0n','https://apps.pertamina.com/bocpp-v2.0/api/equipRecord/','6788934JFZoZP','pertamina','rfid','Running','writeFile','idParameter','bold','catch','timestamp','lastvalue.json','024','number','00:00','blue','1010','application/x-www-form-urlencoded','satrio.sarjono','2-digit','filter','YYYY-MM-DD\x20HH:mm:ss','length','get','8HTBTMu','Sucessfully\x20Login\x20to\x20server','toString','Sucessfully\x20Save\x20Schedule','registerPrompt','021','Jadwal\x20syncron\x20:\x20','application/json','schedule.json','4875464nLZPKk','https://apps.pertamina.com/bocpp-v2.0/api/scheduleHistories?ru=R401&area=LOC-II','tosend.json'];_0x1ff9=function(){return _0x38b6aa;};return _0x1ff9();}async function getInput(){var _0x462dc5=_0x2e2608;username='miftachul.huda',password=_0x462dc5(0x167),scanner=await inquirer[_0x462dc5(0x13e)]([{'type':_0x462dc5(0x137),'name':_0x462dc5(0x166),'message':_0x462dc5(0x161),'filter'(_0x173700){return _0x173700;}}])['then'](_0x36c07e=>{var _0xa07b3d=_0x462dc5;return _0x36c07e[_0xa07b3d(0x166)];}),unit=await inquirer[_0x462dc5(0x13e)]([{'type':_0x462dc5(0x154),'name':_0x462dc5(0x132),'message':_0x462dc5(0x138),'choices':[_0x462dc5(0x136),_0x462dc5(0x115),_0x462dc5(0x13f),'023',_0x462dc5(0x173),_0x462dc5(0x165),'041'],'filter'(_0x411ab7){return _0x411ab7;}}])[_0x462dc5(0x15f)](_0x221a3f=>{var _0x575fc9=_0x462dc5;return _0x221a3f[_0x575fc9(0x132)];}),shift=await inquirer[_0x462dc5(0x13e)]([{'type':_0x462dc5(0x154),'name':_0x462dc5(0x12c),'message':_0x462dc5(0x156),'choices':[_0x462dc5(0x106),_0x462dc5(0x12a),_0x462dc5(0x13c),'12:00',_0x462dc5(0x151),_0x462dc5(0x145)],'filter'(_0x159a32){return _0x159a32;}}])[_0x462dc5(0x15f)](_0x197cd1=>{var _0x3ea62b=_0x462dc5;return _0x197cd1[_0x3ea62b(0x12c)];}),synctime=await inquirer[_0x462dc5(0x13e)]([{'type':'date','name':_0x462dc5(0x14d),'message':'Pilih\x20waktu\x20syncron\x20:','format':{'month':'short','hour':'2-digit','minute':_0x462dc5(0x10b),'hour12':![]},'transformer':_0x5ceb99=>chalk[_0x462dc5(0x16f)][_0x462dc5(0x124)](_0x5ceb99),'filter'(_0x3404a4){return _0x3404a4;}}])[_0x462dc5(0x15f)](_0x1fb697=>{var _0x4db671=_0x462dc5;return _0x1fb697[_0x4db671(0x14d)];}),delay=await inquirer[_0x462dc5(0x13e)]([{'type':_0x462dc5(0x105),'name':_0x462dc5(0x134),'message':'Waktu\x20delay\x20antar\x20equipment\x20:','filter'(_0x5c866a){return _0x5c866a;}}])[_0x462dc5(0x15f)](_0x5b4924=>{var _0x1ba161=_0x462dc5;return _0x5b4924[_0x1ba161(0x134)];}),mode=await inquirer[_0x462dc5(0x13e)]([{'type':'list','name':_0x462dc5(0x126),'message':_0x462dc5(0x155),'choices':[_0x462dc5(0x12d),_0x462dc5(0x13a),_0x462dc5(0x141),_0x462dc5(0x142)],'filter'(_0x230931){return _0x230931;}}])['then'](_0x1963c4=>{var _0x573d23=_0x462dc5;return _0x1963c4[_0x573d23(0x126)];});}async function fire(){var _0x359f30=_0x2e2608,_0x54ff89=async function(){var _0x46e7ac=_0x3b60,_0x28e1ec=qs[_0x46e7ac(0x127)]({'username':username,'password':password,'companyCode':_0x46e7ac(0x108),'domainName':_0x46e7ac(0x16a)}),_0x204e65={'method':'post','url':_0x46e7ac(0x163),'headers':{'Content-Type':_0x46e7ac(0x109)},'data':_0x28e1ec};return console[_0x46e7ac(0x11d)](_0x46e7ac(0x11f)),axios(_0x204e65)['then'](function(_0x12d6fb){var _0x4b7bc7=_0x46e7ac;return console[_0x4b7bc7(0x11d)](_0x4b7bc7(0x111)['green']),_0x12d6fb['data'][_0x4b7bc7(0x15b)];})['catch'](function(_0x286e99){var _0x43014a=_0x46e7ac;console[_0x43014a(0x11d)](_0x43014a(0x15c)[_0x43014a(0x124)]);});},_0x2174cb=async function(_0x55ece6){var _0x4a4fff=_0x3b60,_0x41d992={'method':_0x4a4fff(0x10f),'url':'https://apps.pertamina.com/bocpp-v2.0/api/lastValueRecords?bocpp=boc&ru=R401&area=LOC-II','headers':{'Authorization':'Bearer\x20'+_0x55ece6}};return console[_0x4a4fff(0x11d)](_0x4a4fff(0x121)),axios(_0x41d992)[_0x4a4fff(0x15f)](function(_0x6e302b){var _0x3d025f=_0x4a4fff;return console[_0x3d025f(0x11d)]('Sucessfully\x20Get\x20Last\x20Value'[_0x3d025f(0x139)]),_0x6e302b[_0x3d025f(0x14e)];})[_0x4a4fff(0x170)](function(_0xee258){var _0x47ce46=_0x4a4fff;console[_0x47ce46(0x11d)]('Failed\x20to\x20get\x20Last\x20Value\x20Record'[_0x47ce46(0x124)]),runit();});},_0x4ef458=async function(_0x20787a){var _0x4d33f0=_0x3b60,_0x23c7a={'method':_0x4d33f0(0x10f),'url':_0x4d33f0(0x11a),'headers':{'Authorization':'Bearer\x20'+_0x20787a}};return console[_0x4d33f0(0x11d)](_0x4d33f0(0x123)),axios(_0x23c7a)['then'](function(_0x3af778){var _0x864c95=_0x4d33f0;return console['log'](_0x864c95(0x15e)[_0x864c95(0x139)]),_0x3af778[_0x864c95(0x14e)];})['catch'](function(_0x1def97){var _0x1fd787=_0x4d33f0;console[_0x1fd787(0x11d)](_0x1fd787(0x122)[_0x1fd787(0x124)]),runit();});};let _0xd8d85d=!![];const _0x1fe6e0=await _0x54ff89();function _0x39b5f4(_0x41ce8e,_0x564ff6){try{return _0xd8d85d=!![],require(_0x41ce8e);}catch(_0x3f27e5){return console['log'](_0x564ff6),_0xd8d85d=![],![];}}switch(mode){case _0x359f30(0x12d):lastvalue=_0x39b5f4(_0x359f30(0x147),_0x359f30(0x15a)),schedule=_0x39b5f4(_0x359f30(0x143),'Schedule\x20not\x20available\x20please\x20choose\x20resync\x20mode');break;case'resync\x20all':lastvalue=await _0x2174cb(_0x1fe6e0),fs[_0x359f30(0x16d)](_0x359f30(0x172),JSON[_0x359f30(0x127)](lastvalue))[_0x359f30(0x15f)](function(_0x40c6e8){var _0x34ea7f=_0x359f30;console[_0x34ea7f(0x11d)]('Sucessfully\x20Save\x20Last\x20Value'[_0x34ea7f(0x139)]);})['catch'](function(_0x2eb790){var _0x109b53=_0x359f30;console[_0x109b53(0x11d)]('Failed\x20Save\x20Last\x20Value'[_0x109b53(0x124)]);}),schedule=await _0x4ef458(_0x1fe6e0),fs[_0x359f30(0x16d)](_0x359f30(0x118),JSON[_0x359f30(0x127)](schedule))[_0x359f30(0x15f)](function(_0x18dbf8){var _0x5a0e02=_0x359f30;console['log'](_0x5a0e02(0x113)[_0x5a0e02(0x139)]);})['catch'](function(_0x183832){var _0x5957ae=_0x359f30;console[_0x5957ae(0x11d)]('Failed\x20Save\x20Schedule'[_0x5957ae(0x124)]);});break;case _0x359f30(0x141):lastvalue=await _0x2174cb(_0x1fe6e0),fs['writeFile'](_0x359f30(0x172),JSON[_0x359f30(0x127)](lastvalue))[_0x359f30(0x15f)](function(_0x5cec8e){var _0x258007=_0x359f30;console[_0x258007(0x11d)]('Sucessfully\x20Save\x20Last\x20Value'[_0x258007(0x139)]);})[_0x359f30(0x170)](function(_0xa0b918){var _0x4bdd9f=_0x359f30;console[_0x4bdd9f(0x11d)](_0x4bdd9f(0x158)[_0x4bdd9f(0x124)]);}),schedule=_0x39b5f4('./schedule.json',_0x359f30(0x14a));break;case _0x359f30(0x142):lastvalue=_0x39b5f4(_0x359f30(0x147),_0x359f30(0x15a)),schedule=await _0x4ef458(_0x1fe6e0),fs[_0x359f30(0x16d)](_0x359f30(0x118),JSON[_0x359f30(0x127)](schedule))[_0x359f30(0x15f)](function(_0x244541){var _0x11736c=_0x359f30;console[_0x11736c(0x11d)](_0x11736c(0x113)['green']);})[_0x359f30(0x170)](function(_0x1ca407){var _0xca831e=_0x359f30;console[_0xca831e(0x11d)](_0xca831e(0x125)['red']);});break;}if(_0xd8d85d){var _0x41a1f5=lodash(schedule)[_0x359f30(0x10c)]({'unit':unit,'shift':shift,'status':'Running'})[_0x359f30(0x157)](),_0x5730ea=schedule[_0x359f30(0x10c)](_0x1c2bf7=>{var _0x2331b5=_0x359f30;return _0x1c2bf7['unit']==_0x2331b5(0x130)||_0x1c2bf7[_0x2331b5(0x132)]==_0x2331b5(0x173)&&_0x1c2bf7['shift']==shift&&_0x1c2bf7[_0x2331b5(0x159)]==_0x2331b5(0x16c);}),_0x5e295a=_0x41a1f5[_0x359f30(0x150)](_0x2a6c4c=>{var _0x26e4fc=_0x359f30;synctime=moment(synctime);function _0x2e8aa6(_0x485dfe,_0xc9e97b){return _0x485dfe+_0xc9e97b*0x3e8;}var _0x2a8c99=lodash(lastvalue)[_0x26e4fc(0x10c)]({'idEquipment':_0x2a6c4c[_0x26e4fc(0x153)]})[_0x26e4fc(0x157)](),_0x1baa05=Object[_0x26e4fc(0x133)](_0x2a8c99)[_0x26e4fc(0x140)](function(_0x2773a7,_0x25fef1){var _0xb5359=_0x26e4fc;return _0x2773a7[_0xb5359(0x14c)](_0x2a8c99[_0x25fef1]);},[]),_0x14a97a=_0x2e8aa6(synctime,delay),_0x2099f4=moment(_0x14a97a)[_0x26e4fc(0x12f)](_0x26e4fc(0x10d))[_0x26e4fc(0x112)](),_0x137f3a=moment(_0x14a97a)[_0x26e4fc(0x12f)](_0x26e4fc(0x146))['toString']();return synctime=_0x14a97a,_0x1baa05['map'](_0x3b0246=>{var _0x4ecdd5=_0x26e4fc;return{'idScheduleHistory':_0x2a6c4c['id'],'parentRecord':_0x2a6c4c['parentRecord'],'value':_0x3b0246['value'],'idParameter':_0x3b0246[_0x4ecdd5(0x16e)],'scanWith':_0x4ecdd5(0x16b),'timestamp':_0x2099f4,'scanBy':scanner,'approved':0x0,'shift':_0x137f3a,'notesRecord':''};});}),_0x5cf081=Object[_0x359f30(0x133)](_0x5e295a)[_0x359f30(0x140)](function(_0xba0961,_0x3069b3){var _0x19f1c0=_0x359f30;return _0xba0961[_0x19f1c0(0x14c)](_0x5e295a[_0x3069b3]);},[]);await fs[_0x359f30(0x16d)](_0x359f30(0x11b),JSON[_0x359f30(0x127)](_0x5cf081))[_0x359f30(0x15f)](function(_0x568572){var _0x5be608=_0x359f30;console[_0x5be608(0x11d)]('Sucessfully\x20Save\x20Record\x20Data'[_0x5be608(0x139)]);})[_0x359f30(0x170)](function(_0x365014){var _0x2c6c81=_0x359f30;console[_0x2c6c81(0x11d)]('Failed\x20Save\x20Record\x20Data'[_0x2c6c81(0x124)]);});}else _0x5cf081=null;return[_0x5cf081,_0x1fe6e0,_0x41a1f5];}var link=_0x2e2608(0x152),link2=_0x2e2608(0x168),syncronize=async function(_0x13edfb,_0x585677){var _0x7fd6c1=_0x2e2608,_0xef0925=JSON['stringify'](_0x13edfb),_0x490dfa={'method':'post','url':link,'headers':{'Authorization':_0x7fd6c1(0x14f)+_0x585677,'Content-Type':_0x7fd6c1(0x117)},'data':_0xef0925};return console[_0x7fd6c1(0x11d)](_0x7fd6c1(0x160)),axios(_0x490dfa)[_0x7fd6c1(0x15f)](function(_0x5ed69f){var _0x2ece57=_0x7fd6c1;return console[_0x2ece57(0x11d)](_0x5ed69f),_0x5ed69f[_0x2ece57(0x14e)];})[_0x7fd6c1(0x170)](function(_0x18c4ac){console['log'](_0x18c4ac);});},runit=async function(){var _0x3bffc3=_0x2e2608;await getInput();var _0x2d4c74=await fire();_0x2d4c74[0x2]!=null&&_0x2d4c74[0x0]!=null?(_0x2d4c74[0x2][_0x3bffc3(0x12e)](_0xe87989=>{var _0x5a8d4b=_0x3bffc3;console[_0x5a8d4b(0x11d)](_0xe87989['equipment']);}),console[_0x3bffc3(0x11d)](Object[_0x3bffc3(0x133)](_0x2d4c74[0x2])[_0x3bffc3(0x10e)]+_0x3bffc3(0x128)),console[_0x3bffc3(0x11d)](_0x3bffc3(0x116)+shift[_0x3bffc3(0x107)]),console[_0x3bffc3(0x11d)]('Waktu\x20sync\x20Equipment\x20terakhir\x20:\x20'+_0x2d4c74[0x0][_0x2d4c74[0x0][_0x3bffc3(0x10e)]-0x1][_0x3bffc3(0x171)][_0x3bffc3(0x107)]),sync=await inquirer['prompt']([{'type':_0x3bffc3(0x154),'name':_0x3bffc3(0x11e),'message':'Data\x20ready\x20to\x20Send,\x20are\x20you\x20sure\x20to\x20upload\x20:','choices':[_0x3bffc3(0x13d),'no'],'filter'(_0x515ef4){return _0x515ef4;}}])[_0x3bffc3(0x15f)](_0x34fcbb=>{var _0xb26a7e=_0x3bffc3;return _0x34fcbb[_0xb26a7e(0x11e)]===_0xb26a7e(0x13d)?(scanner!=_0xb26a7e(0x162)||scanner!=_0xb26a7e(0x149)||scanner!=_0xb26a7e(0x10a)?link=link2:link=link,console['log'](syncronize(_0x2d4c74[0x0],_0x2d4c74[0x1])['data'])):console[_0xb26a7e(0x11d)](_0xb26a7e(0x15d)['red']),_0x34fcbb[_0xb26a7e(0x11e)];})):console[_0x3bffc3(0x11d)]('Data\x20not\x20available'[_0x3bffc3(0x124)]);};runit();
