function _0x4752(_0x495eef,_0x310497){var _0x1882d9=_0x1882();return _0x4752=function(_0x4752b9,_0x2a5984){_0x4752b9=_0x4752b9-0x181;var _0x14eaa0=_0x1882d9[_0x4752b9];return _0x14eaa0;},_0x4752(_0x495eef,_0x310497);}var _0x1fed8b=_0x4752;(function(_0x37fa63,_0x5bc92e){var _0x24a2f9=_0x4752,_0x226aef=_0x37fa63();while(!![]){try{var _0x4e1139=parseInt(_0x24a2f9(0x1c3))/0x1+-parseInt(_0x24a2f9(0x1be))/0x2*(parseInt(_0x24a2f9(0x1e4))/0x3)+parseInt(_0x24a2f9(0x1d5))/0x4+-parseInt(_0x24a2f9(0x1ab))/0x5*(-parseInt(_0x24a2f9(0x1a6))/0x6)+-parseInt(_0x24a2f9(0x1ef))/0x7+-parseInt(_0x24a2f9(0x18a))/0x8+parseInt(_0x24a2f9(0x1a0))/0x9;if(_0x4e1139===_0x5bc92e)break;else _0x226aef['push'](_0x226aef['shift']());}catch(_0x4618d8){_0x226aef['push'](_0x226aef['shift']());}}}(_0x1882,0xad083));const fs=require(_0x1fed8b(0x1ae)),lodash=require(_0x1fed8b(0x1b7)),moment=require(_0x1fed8b(0x1a2));var axios=require(_0x1fed8b(0x1ac)),chalk=require(_0x1fed8b(0x193)),qs=require('qs');require(_0x1fed8b(0x1a1));const inquirer=require(_0x1fed8b(0x1b9));function _0x1882(){var _0x39b9f8=['Waktu\x20sync\x20Equipment\x20terakhir\x20:\x20','16:00','HH:mm:ss','resync\x20schedule','23298012Ydbnur','colors','moment','./schedule.json','parentRecord','Pilih\x20waktu\x20syncron\x20:','6SKsLJA','keys','synctime','024','https://apps.pertamina.com/bocpp-v2.0/api/equipRecords/','1493040QHNfDx','axios','Failed\x20to\x20Get\x20Schedule\x20History','fs/promises','status','muhammad.aulya','Data\x20not\x20available','\x20Equip\x20Record\x20Ready\x20to\x20send','resync\x20last\x20value','token','Schedule\x20not\x20available\x20please\x20choose\x20resync\x20mode','scanner','lodash','value','inquirer','blue','short','Sucessfully\x20Get\x20Last\x20Value','00:00','2TVIvAO','reduce','asyncFunti0n','map','miftachul.huda','800279kPLGOb','skip','green','025','041','application/x-www-form-urlencoded','Last\x20value\x20not\x20available\x20please\x20choose\x20resync\x20mode','input','002','Running','timestamp','lastvalue.json','Failed\x20Save\x20Schedule','shift','muhammad.rovalino','length','number','registerPrompt','2622900TwyNqV','12:00','022','log','delay','Masukan\x20nama\x20scanner\x20:','writeFile','concat','filter','Bearer\x20','schedule.json','tosend.json','2-digit','mode','Sucessfully\x20Save\x20Last\x20Value','3153678oHqUYL','pertamina','Session\x20Expired\x20Please\x20Update\x20!!','Sucessfully\x20Login\x20to\x20server','sync','Pilih\x20unit\x20:','https://apps.pertamina.com/bocpp-v2.0/api/scheduleHistories?ru=R401&area=LOC-II','toString','023','get','Pilih\x20mode\x20data\x20:','8541253qBCVUx','resync\x20all','Pilih\x20jadwal\x20waktu\x20:','forEach','then','021','026','Sucessfully\x20Save\x20Schedule','Upload\x20canceled','catch','idEquipment','data','08:00','YYYY-MM-DD\x20HH:mm:ss','Data\x20ready\x20to\x20Send,\x20are\x20you\x20sure\x20to\x20upload\x20:','10905088fLFKEQ','post','red','Failed\x20to\x20Login\x20Something\x20Wrong','https://apps.pertamina.com/bocpp-v2.0/api/logins?secretKey=ee8fbc9dfa034db4a2419bfb4bfa9562','./lastvalue.json','date','bold','Failed\x20Save\x20Last\x20Value','chalk','prompt','Sucessfully\x20Save\x20Record\x20Data','unit','stringify','Jadwal\x20syncron\x20:\x20','format','list','Uploading\x20Record\x20Data...'];_0x1882=function(){return _0x39b9f8;};return _0x1882();}inquirer[_0x1fed8b(0x1d4)](_0x1fed8b(0x190),require('inquirer-date-prompt'));var synctime,unit,shift,delay,scanner,mode,lastvalue,schedule;async function getInput(){var _0x190f39=_0x1fed8b;username=_0x190f39(0x1c2),password=_0x190f39(0x1c0),scanner=await inquirer[_0x190f39(0x194)]([{'type':_0x190f39(0x1ca),'name':_0x190f39(0x1b6),'message':_0x190f39(0x1da),'filter'(_0x52b821){return _0x52b821;}}])[_0x190f39(0x1f3)](_0x80270b=>{var _0x313bc9=_0x190f39;return _0x80270b[_0x313bc9(0x1b6)];}),unit=await inquirer[_0x190f39(0x194)]([{'type':_0x190f39(0x19a),'name':_0x190f39(0x196),'message':_0x190f39(0x1e9),'choices':[_0x190f39(0x1cb),_0x190f39(0x1f4),_0x190f39(0x1d7),_0x190f39(0x1ec),_0x190f39(0x1a9),_0x190f39(0x1c6),_0x190f39(0x1c7)],'filter'(_0x59cffd){return _0x59cffd;}}])['then'](_0xe6b17=>{var _0x166195=_0x190f39;return _0xe6b17[_0x166195(0x196)];}),shift=await inquirer[_0x190f39(0x194)]([{'type':_0x190f39(0x19a),'name':_0x190f39(0x1d0),'message':_0x190f39(0x1f1),'choices':[_0x190f39(0x1bd),'04:00',_0x190f39(0x187),_0x190f39(0x1d6),_0x190f39(0x19d),'20:00'],'filter'(_0x5c9882){return _0x5c9882;}}])[_0x190f39(0x1f3)](_0xec0515=>{var _0x495f9c=_0x190f39;return _0xec0515[_0x495f9c(0x1d0)];}),synctime=await inquirer['prompt']([{'type':_0x190f39(0x190),'name':_0x190f39(0x1a8),'message':_0x190f39(0x1a5),'format':{'month':_0x190f39(0x1bb),'hour':_0x190f39(0x1e1),'minute':_0x190f39(0x1e1),'hour12':![]},'transformer':_0x5ea1a6=>chalk[_0x190f39(0x191)][_0x190f39(0x18c)](_0x5ea1a6),'filter'(_0x76925b){return _0x76925b;}}])[_0x190f39(0x1f3)](_0x57acf2=>{var _0x56964f=_0x190f39;return _0x57acf2[_0x56964f(0x1a8)];}),delay=await inquirer['prompt']([{'type':_0x190f39(0x1d3),'name':_0x190f39(0x1d9),'message':'Waktu\x20delay\x20antar\x20equipment\x20:','filter'(_0x318cbc){return _0x318cbc;}}])[_0x190f39(0x1f3)](_0x248d48=>{var _0x163838=_0x190f39;return _0x248d48[_0x163838(0x1d9)];}),mode=await inquirer[_0x190f39(0x194)]([{'type':'list','name':'mode','message':_0x190f39(0x1ee),'choices':[_0x190f39(0x1c4),'resync\x20all',_0x190f39(0x1b3),_0x190f39(0x19f)],'filter'(_0x2e63dd){return _0x2e63dd;}}])[_0x190f39(0x1f3)](_0x2a0356=>{var _0x29ed7a=_0x190f39;return _0x2a0356[_0x29ed7a(0x1e2)];});}async function fire(){var _0xe4ba77=_0x1fed8b,_0x18cfdb=async function(){var _0x5bd866=_0x4752,_0x27575e=qs[_0x5bd866(0x197)]({'username':username,'password':password,'companyCode':'1010','domainName':_0x5bd866(0x1e5)}),_0x3a5dc3={'method':'post','url':_0x5bd866(0x18e),'headers':{'Content-Type':_0x5bd866(0x1c8)},'data':_0x27575e};return console[_0x5bd866(0x1d8)]('Send\x20Login\x20key....'),axios(_0x3a5dc3)['then'](function(_0x56a66f){var _0x501edf=_0x5bd866;return console[_0x501edf(0x1d8)](_0x501edf(0x1e7)[_0x501edf(0x1c5)]),_0x56a66f['data'][_0x501edf(0x1b4)];})[_0x5bd866(0x184)](function(_0xac984a){var _0x439750=_0x5bd866;console[_0x439750(0x1d8)](_0x439750(0x18d)[_0x439750(0x18c)]);});},_0x251d9e=async function(_0x33d94b){var _0x496a01=_0x4752,_0x44d361={'method':_0x496a01(0x1ed),'url':'https://apps.pertamina.com/bocpp-v2.0/api/lastValueRecords?bocpp=boc&ru=R401&area=LOC-II','headers':{'Authorization':'Bearer\x20'+_0x33d94b}};return console[_0x496a01(0x1d8)]('Request\x20Last\x20Value,\x20Please\x20Wait....'),axios(_0x44d361)[_0x496a01(0x1f3)](function(_0x497dc6){var _0x2b0b7d=_0x496a01;return console[_0x2b0b7d(0x1d8)](_0x2b0b7d(0x1bc)['green']),_0x497dc6[_0x2b0b7d(0x186)];})[_0x496a01(0x184)](function(_0x462aa5){var _0x1e8cc2=_0x496a01;console[_0x1e8cc2(0x1d8)]('Failed\x20to\x20get\x20Last\x20Value\x20Record'['red']),runit();});},_0xec823e=async function(_0x524241){var _0x104f30=_0x4752,_0x3a7b9b={'method':_0x104f30(0x1ed),'url':_0x104f30(0x1ea),'headers':{'Authorization':_0x104f30(0x1de)+_0x524241}};return console['log']('Request\x20Schedule\x20History,\x20Please\x20Wait....'),axios(_0x3a7b9b)[_0x104f30(0x1f3)](function(_0x125a32){var _0x12c51b=_0x104f30;return console[_0x12c51b(0x1d8)]('Sucessfully\x20Get\x20Schedule\x20History'[_0x12c51b(0x1c5)]),_0x125a32['data'];})[_0x104f30(0x184)](function(_0xc69963){var _0x2b0bd3=_0x104f30;console[_0x2b0bd3(0x1d8)](_0x2b0bd3(0x1ad)[_0x2b0bd3(0x18c)]),runit();});};let _0x64fe6c=!![];const _0x3bc05f=await _0x18cfdb();function _0x5f4562(_0x985f6d,_0x184ea1){var _0x2dd7bd=_0x4752;try{return _0x64fe6c=!![],require(_0x985f6d);}catch(_0x220506){return console[_0x2dd7bd(0x1d8)](_0x184ea1),_0x64fe6c=![],![];}}switch(mode){case _0xe4ba77(0x1c4):lastvalue=_0x5f4562(_0xe4ba77(0x18f),_0xe4ba77(0x1c9)),schedule=_0x5f4562(_0xe4ba77(0x1a3),_0xe4ba77(0x1b5));break;case _0xe4ba77(0x1f0):lastvalue=await _0x251d9e(_0x3bc05f),fs[_0xe4ba77(0x1db)](_0xe4ba77(0x1ce),JSON[_0xe4ba77(0x197)](lastvalue))['then'](function(_0x49737e){var _0x1eae6f=_0xe4ba77;console[_0x1eae6f(0x1d8)](_0x1eae6f(0x1e3)[_0x1eae6f(0x1c5)]);})['catch'](function(_0x4e518a){var _0xbb337a=_0xe4ba77;console['log'](_0xbb337a(0x192)[_0xbb337a(0x18c)]);}),schedule=await _0xec823e(_0x3bc05f),fs[_0xe4ba77(0x1db)](_0xe4ba77(0x1df),JSON[_0xe4ba77(0x197)](schedule))[_0xe4ba77(0x1f3)](function(_0xd28f11){var _0x37e16e=_0xe4ba77;console[_0x37e16e(0x1d8)](_0x37e16e(0x182)['green']);})[_0xe4ba77(0x184)](function(_0x1b71cd){var _0x23c49e=_0xe4ba77;console[_0x23c49e(0x1d8)](_0x23c49e(0x1cf)[_0x23c49e(0x18c)]);});break;case'resync\x20last\x20value':lastvalue=await _0x251d9e(_0x3bc05f),fs['writeFile']('lastvalue.json',JSON[_0xe4ba77(0x197)](lastvalue))['then'](function(_0x3ac0f1){var _0x5a7382=_0xe4ba77;console[_0x5a7382(0x1d8)](_0x5a7382(0x1e3)['green']);})[_0xe4ba77(0x184)](function(_0x5c3373){var _0x224854=_0xe4ba77;console[_0x224854(0x1d8)](_0x224854(0x192)[_0x224854(0x18c)]);}),schedule=_0x5f4562(_0xe4ba77(0x1a3),'Schedule\x20not\x20available\x20please\x20choose\x20resync\x20mode');break;case _0xe4ba77(0x19f):lastvalue=_0x5f4562('./lastvalue.json',_0xe4ba77(0x1c9)),schedule=await _0xec823e(_0x3bc05f),fs[_0xe4ba77(0x1db)]('schedule.json',JSON['stringify'](schedule))[_0xe4ba77(0x1f3)](function(_0x1a2f24){var _0x31bb99=_0xe4ba77;console[_0x31bb99(0x1d8)]('Sucessfully\x20Save\x20Schedule'[_0x31bb99(0x1c5)]);})[_0xe4ba77(0x184)](function(_0x3fb416){var _0x40ff4c=_0xe4ba77;console[_0x40ff4c(0x1d8)](_0x40ff4c(0x1cf)[_0x40ff4c(0x18c)]);});break;}if(_0x64fe6c){var _0x3a87ee=lodash(schedule)[_0xe4ba77(0x1dd)]({'unit':unit,'shift':shift,'status':_0xe4ba77(0x1cc)})[_0xe4ba77(0x1b8)](),_0x4ac03c=schedule[_0xe4ba77(0x1dd)](_0x4cd08d=>{var _0xae559=_0xe4ba77;return _0x4cd08d[_0xae559(0x196)]==_0xae559(0x181)||_0x4cd08d[_0xae559(0x196)]==_0xae559(0x1a9)&&_0x4cd08d['shift']==shift&&_0x4cd08d[_0xae559(0x1af)]==_0xae559(0x1cc);}),_0x4700c5=_0x3a87ee['map'](_0x5dae29=>{var _0x3314f2=_0xe4ba77;synctime=moment(synctime);function _0x511198(_0x109a9c,_0x2f334c){return _0x109a9c+_0x2f334c*0x3e8;}var _0xa2a7d0=lodash(lastvalue)['filter']({'idEquipment':_0x5dae29[_0x3314f2(0x185)]})[_0x3314f2(0x1b8)](),_0x500837=Object['keys'](_0xa2a7d0)[_0x3314f2(0x1bf)](function(_0x52097e,_0x5a2e51){var _0x214e46=_0x3314f2;return _0x52097e[_0x214e46(0x1dc)](_0xa2a7d0[_0x5a2e51]);},[]),_0x169378=_0x511198(synctime,delay),_0x40397b=moment(_0x169378)[_0x3314f2(0x199)](_0x3314f2(0x188))[_0x3314f2(0x1eb)](),_0xc77952=moment(_0x169378)[_0x3314f2(0x199)](_0x3314f2(0x19e))[_0x3314f2(0x1eb)]();return synctime=_0x169378,_0x500837[_0x3314f2(0x1c1)](_0x431d7a=>{var _0x4cd006=_0x3314f2;return{'idScheduleHistory':_0x5dae29['id'],'parentRecord':_0x5dae29[_0x4cd006(0x1a4)],'value':_0x431d7a['value'],'idParameter':_0x431d7a['idParameter'],'scanWith':'rfid','timestamp':_0x40397b,'scanBy':scanner,'approved':0x0,'shift':_0xc77952,'notesRecord':''};});}),_0x133297=Object['keys'](_0x4700c5)[_0xe4ba77(0x1bf)](function(_0x4a7c2a,_0x348cbf){var _0x24db6a=_0xe4ba77;return _0x4a7c2a[_0x24db6a(0x1dc)](_0x4700c5[_0x348cbf]);},[]);await fs[_0xe4ba77(0x1db)](_0xe4ba77(0x1e0),JSON[_0xe4ba77(0x197)](_0x133297))[_0xe4ba77(0x1f3)](function(_0x51a2da){var _0x115fff=_0xe4ba77;console['log'](_0x115fff(0x195)[_0x115fff(0x1c5)]);})[_0xe4ba77(0x184)](function(_0xa57105){var _0x1d84df=_0xe4ba77;console['log']('Failed\x20Save\x20Record\x20Data'[_0x1d84df(0x18c)]);});}else _0x133297=null;return[_0x133297,_0x3bc05f,_0x3a87ee];}var syncronize=async function(_0x249641,_0xd4c32){var _0x111e97=_0x1fed8b,_0x5421f7=JSON[_0x111e97(0x197)](_0x249641),_0x40421e={'method':_0x111e97(0x18b),'url':_0x111e97(0x1aa),'headers':{'Authorization':_0x111e97(0x1de)+_0xd4c32,'Content-Type':'application/json'},'data':_0x5421f7};return console[_0x111e97(0x1d8)](_0x111e97(0x19b)),axios(_0x40421e)[_0x111e97(0x1f3)](function(_0x3b8b33){var _0x45b4e5=_0x111e97;return console[_0x45b4e5(0x1d8)](_0x3b8b33),_0x3b8b33[_0x45b4e5(0x186)];})[_0x111e97(0x184)](function(_0x8f9922){console['log'](_0x8f9922);});},runit=async function(){var _0x522f84=_0x1fed8b;await getInput();if(scanner==_0x522f84(0x1b0)||scanner==_0x522f84(0x1d1)||scanner=='satrio.sarjono'){var _0x3b571d=await fire();_0x3b571d[0x2]!=null&&_0x3b571d[0x0]!=null?(_0x3b571d[0x2][_0x522f84(0x1f2)](_0x5f25e9=>{var _0x3bef1c=_0x522f84;console[_0x3bef1c(0x1d8)](_0x5f25e9['equipment']);}),console[_0x522f84(0x1d8)](Object[_0x522f84(0x1a7)](_0x3b571d[0x2])[_0x522f84(0x1d2)]+_0x522f84(0x1b2)),console['log'](_0x522f84(0x198)+shift[_0x522f84(0x1ba)]),console[_0x522f84(0x1d8)](_0x522f84(0x19c)+_0x3b571d[0x0][_0x3b571d[0x0]['length']-0x1][_0x522f84(0x1cd)][_0x522f84(0x1ba)]),sync=await inquirer[_0x522f84(0x194)]([{'type':_0x522f84(0x19a),'name':_0x522f84(0x1e8),'message':_0x522f84(0x189),'choices':['yes','no'],'filter'(_0x17c8e4){return _0x17c8e4;}}])['then'](_0x370736=>{var _0x165562=_0x522f84;return _0x370736[_0x165562(0x1e8)]==='yes'?console[_0x165562(0x1d8)](syncronize(_0x3b571d[0x0],_0x3b571d[0x1])[_0x165562(0x186)]):console['log'](_0x165562(0x183)[_0x165562(0x18c)]),_0x370736[_0x165562(0x1e8)];})):console[_0x522f84(0x1d8)](_0x522f84(0x1b1)[_0x522f84(0x18c)]);}else console[_0x522f84(0x1d8)](_0x522f84(0x1e6));};runit();
